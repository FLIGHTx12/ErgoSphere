<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EregoSphere</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><circle cx=%2250%22 cy=%2250%22 r=%2240%22 fill=%22black%22/><circle cx=%2280%22 cy=%2220%22 r=%2212%22 fill=%22lime%22 opacity=%220.4%22/><circle cx=%2275%22 cy=%2225%22 r=%228%22 fill=%22lime%22/><circle cx=%2220%22 cy=%2280%22 r=%2212%22 fill=%22purple%22 opacity=%220.4%22/><circle cx=%2225%22 cy=%2275%22 r=%228%22 fill=%22purple%22/></svg>" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/week-tracker.css" />
    
    
    <style>
      /* Responsive main-content on smaller screens */
      @media (max-width: 600px) {
        #main-content {
          width: 90vw;
          transition: width 0.3s ease-in-out;
        }
        #main-content.sidebar-visible {
          width: 65vw;
        }
      }
      
      /* Additional centering styles */
      header, #main-content, hr {
        margin-left: auto;
        margin-right: auto;
        text-align: center;
        max-width: 1200px;
        box-sizing: border-box;
      }
      
      /* Fix specific div alignment */
      #main-content > div {
        margin-left: auto;
        margin-right: auto;
      }
      
      /* Ensure HR is centered */
      hr {
        display: block;
        width: 90%;
      }

      /* Styles for sidebar toggle button */
      #sidebar-toggle {
        position: fixed;
        top: 70px; /* Adjusted from 20px to 70px */
        right: 20px; /* Changed from left to right */
        z-index: 1005; /* Ensure it's above other elements like navbar if necessary */
        background-color: rgba(51, 51, 51, 0.8); /* Semi-transparent background */
        color: white;
        border: 1px solid rgba(255, 255, 255, 0.5);
        padding: 5px 10px; /* Reduced padding for a smaller button */
        cursor: pointer;
        font-size: 16px; /* Reduced font size for a smaller button */
        border-radius: 5px;
        display: none; /* Hidden by default, shown via JS/media query */
        transition: background-color 0.3s ease;
      }

      #sidebar-toggle:hover {
        background-color: rgba(85, 85, 85, 0.9);
      }      /* Responsive adjustments for tablet-sized screens */
      @media (min-width: 601px) and (max-width: 1023px) {
        #sidebar-toggle {
          display: block; /* Show the toggle button */
        }        /* Adjust main content when sidebar is visible on tablets */
        #main-content.sidebar-visible {
          margin-right: 150px; /* Push content to the left to make room for sidebar */
          margin-left: auto;
        }
        #main-content {
          /* Ensure smooth transition for margin change */
          transition: margin-right 0.3s ease-in-out, width 0.3s ease-in-out; /* Transition margin-right */
        }
      }
    </style>

</head>

<body>
<button id="sidebar-toggle" aria-label="Toggle sidebar" aria-expanded="false">&#9776;</button>

<nav id="navbar">
  <button><a href="index.html">HOME</a></button>
  <button><a href="pages/ErgoShop.html">ErgoShop</a></button>
  <button><a href="pages/MODS.html">MODS</a></button>
  <button><a href="pages/casino.html">CASINO</a></button>
  <button><a href="pages/scoreboard.html">SCOREBOARD</a></button>
  <button><a href="pages/contracts.html">CONTRACTS</a></button>
</nav>

<hr>
<header>
  <h1>ErgoSphere</h1>
</header>
<hr>

<div id="sidebar">
  <button><a href="pages/ErgoArena.html">ErgoArena</a></button>
  <button><a href="pages/ErgoBazaar.html">ErgoBazaar</a></button>
  <button><a href="pages/HCMC.html">HCMC</a></button>
   <button><a href="pages/workout.html">Workouts</a></button>
  <button><a href="pages/admin/admin.html">Admin</a></button>
  
</div>
<main id="main-content">
  <!-- New cyberpunk landing page sections -->  <div id="statusPanel" class="cyber-panel glass-effect">
    <h2 class="cyber-title">Current Champions</h2>
    <div class="cyber-grid">      
      <div class="cyber-card" id="bingwa-card">
        <div class="card-header edit-link" onclick="window.location.href='pages/admin/manage-selections.html';" title="Click to edit weekly selections">
          <span class="neon-text" >WK Bingwa <br> Champion</span>
        </div>        
        <div class="card-content">
          <span id="current-bingwa" class="champion-name"></span>
          <div class="status-decor"></div>
        </div>
      </div>      
      <div class="cyber-card" id="atletico-card">
        <div class="card-header edit-link" onclick="window.location.href='pages/admin/manage-selections.html';" title="Click to edit weekly selections">
          <span class="neon-text">WK Atletico <br> Champ</span>
        </div>
        <div class="card-content">
          <span id="current-atletico" class="champion-name"></span>
          <div class="status-decor"></div>
        </div>
      </div>
    </div>
  </div>

  <div id="weeklyChoicesPanel" class="cyber-panel glass-effect">
    <h2 class="cyber-title">Weekly Choices</h2>
    <div class="cyber-grid">
      <div class="cyber-card" id="next-bingwa-card">
        <div class="card-header edit-link" onclick="window.location.href='pages/admin/manage-selections.html';" title="Click to edit weekly selections">
          <span class="neon-text">Next Bingwa<br>Challenge</span>
        </div>
        <div class="card-content">
          <span id="next-bingwa-challenge" class="champion-name"></span>
          <div class="status-decor"></div>
        </div>
      </div>
      <div class="cyber-card" id="atletico-workout-card">
        <div class="card-header edit-link" onclick="window.location.href='pages/admin/manage-selections.html';" title="Click to edit weekly selections">
          <span class="neon-text">Atletico<br>Workout</span>
        </div>
        <div class="card-content">
          <span id="atletico-workout" class="champion-name"></span>
          <div class="status-decor"></div>
        </div>
      </div>
      <div class="cyber-card" id="weekly-errand-card">
        <div class="card-header edit-link" onclick="window.location.href='pages/admin/manage-selections.html';" title="Click to edit weekly selections">
          <span class="neon-text">Weekly<br>Errand</span>
        </div>
        <div class="card-content">
          <span id="weekly-errand" class="champion-name"></span>
          <div class="status-decor"></div>
        </div>
      </div>
    </div>
  </div>

  <div id="moviePanel" class="cyber-panel glass-effect">
    <h2 class="cyber-title">Movie Night</h2>
    <div class="cyber-card wide-card">
      <div class="card-header edit-link" onclick="window.location.href='pages/admin/manage-selections.html';" title="Click to edit weekly selections">
        <span class="neon-text">Current Selection</span>
      </div>      
      <div class="card-content">
        <span id="current-movie" class="movie-title">NEW_MOVIE_TITLE</span>
        <div class="movie-decor"></div>
      </div>
    </div>
  </div>

  <div id="banquetPanel" class="cyber-panel glass-effect">
    <h2 class="cyber-title">Bingwa Banquet & Brunch</h2>
    <div class="cyber-grid">
      <div class="cyber-card wide-card">
        <div class="card-header edit-link" onclick="window.location.href='pages/admin/manage-selections.html';" title="Click to edit weekly selections">
          <span class="neon-text">Sunday Brunch</span>
        </div>
        <div class="card-content">
          <span id="current-brunch" class="meal-title">SELECT A BRUNCH</span>
          <div class="meal-decor"></div>
        </div>
      </div>
      <div class="cyber-card wide-card">
        <div class="card-header edit-link" onclick="window.location.href='pages/admin/manage-selections.html';" title="Click to edit weekly selections">
          <span class="neon-text">Saturday Dinner</span>
        </div>
        <div class="card-content">
          <span id="current-banquet" class="meal-title">SELECT A MEAL</span>
          <div class="meal-decor"></div>
        </div>
      </div>
    </div>
  </div>

  <div id="youtubePanel" class="cyber-panel glass-effect">
    <h2 class="cyber-title">YouTube Theater</h2>
    <div class="cyber-card wide-card">
      <div class="card-header edit-link" onclick="window.location.href='pages/admin/manage-selections.html';" title="Click to edit weekly selections">
        <span class="neon-text">Current Selection</span>
      </div>
      <div class="card-content">
        <span id="current-youtube" class="movie-title">SELECT A VIDEO</span>
        <div class="movie-decor"></div>
      </div>
    </div>
  </div>

  <div id="countdownPanel" class="cyber-panel glass-effect">
    <h2 class="cyber-title">Countdowns</h2>
    <div class="cyber-grid">
      <div class="cyber-card">
        <div class="card-header">
          <span class="neon-text">ergoART Challenge</span>
        </div>        <div class="card-content">
          <p>ART Submissions Due In:</p>
          <div class="countdown-container">
            <span class="countdown-segment"><span id="ergoart-days">00</span><span class="unit">d</span></span>
            <span class="countdown-separator">:</span>
            <span class="countdown-segment"><span id="ergoart-hours">00</span><span class="unit">h</span></span>
            <span class="countdown-separator">:</span>
            <span class="countdown-segment"><span id="ergoart-minutes">00</span><span class="unit">m</span></span>
            <span class="countdown-separator">:</span>
            <span class="countdown-segment"><span id="ergoart-seconds">00</span><span class="unit">s</span></span>
          </div>
        </div>         <div class="card-header">
            <span class="neon-text">This quarter's subject is:<br> "<span id="ergo-art-subject">Loading...</span>"</span>
          </div>
      </div>      <div class="cyber-card">
        <div class="card-header">
          <span class="neon-text">EROGsphere QTR: <span id="current-quarter">2</span></span>
        </div><div class="card-content">
          <p>Next Quarter Begins In:</p>
          <div class="countdown-container">
            <span class="countdown-segment"><span id="quarter-days">00</span><span class="unit">d</span></span>
            <span class="countdown-separator">:</span>
            <span class="countdown-segment"><span id="quarter-hours">00</span><span class="unit">h</span></span>
            <span class="countdown-separator">:</span>
            <span class="countdown-segment"><span id="quarter-minutes">00</span><span class="unit">m</span></span>
            <span class="countdown-separator">:</span>
            <span class="countdown-segment"><span id="quarter-seconds">00</span><span class="unit">s</span></span>
          </div>
          
        </div>        <div class="card-header">
            <span class="neon-text">This quarter's solo game:<br><span id="current-solo-game">Loading...</span></span>
          </div>
      </div>
    </div>
  </div>
  <!-- Original content starts here -->
  <div id="ergosphereRules" class="glass-effect">
    <h3>🏆 BINGWA Challenge Rules 🏆</h3>
    
    <details><summary>📜 RULES 📜</summary>
      <p>
        <b>Bingwa</b> means Champion 💪, and <b>Kushindwa</b> means Failure 🤕.
      </p>

      <p>Every Sunday morning, contestants will play one Wii Sports game to determine the Bingwa (champion) for the week. 🎮 The Bingwa earns rewards and privileges for the following week. ✨ </p>
      <p>All scores are final, even if there are controller issues or the game seems unfair. 🙅‍♂️🙅‍♀️  Contestants must shake hands at the end of the game to show good sportsmanship. 🤝 </p> 
      <p>During the week of your birthday (Sunday-Saturday), you are automatically the Bingwa. 🎂🥳 If a contestant wins three times in a row, they receive a 100 Ducat bonus from the Bank. 💰💰💰 </p>
    </details>
    
    <hr>
    
    <details><summary>🎁 REWARDS 🎁</summary>
      <ul></ul>
        <li>🏆 The Kushindwa chooses the next week's game, except for the game they most recently picked. 🎮 </li>
        <li>🏆 The Kushindwa cooks breakfast for the Bingwa on Sunday and makes dinner the following Saturday. 🍳🍽️ </li>
        <li>🏆 The Bingwa enjoys "LUXURY HOUR" for the first hour of meal prep and while the Kushindwa cooks Saturday dinner. 🛀👑 </li>
        <li>🏆 Bingwa gets to choose from:
          1 bottle of complementary wine 🍷 , 3 Complementary snacks 😋, Schedule 2 hours of free Game time for the week 🎮,  Schedule 2 hours of free Cinema time for the week 🎬 or 1 free weekday Golden Ticket  🎟 (Bingwa Reward must be accepted or scheduled the day of the win or the rewards are void) </li>
        <li>🏆 The Bingwa has the final say on the next week's schedule and can rearrange anything without argument or rebuttal. 🗓️ </li>
        <li>🏆 The Bingwa chooses the week's movie, YouTube theater, and errand without argument or rebuttal. 🎬📺🚗 </li>
        <li>🏆 The Bingwa can veto any one argument that week and postpone it for a day or week without argument or rebuttal. 🙊🙉🙈 </li>
      </ul>
    </details>
    
    <hr>

    <details><summary>⭐ YEARLY REWARD ⭐</summary>
      <p>
        At the end of the year, the contestant who was Bingwa the most weeks receives the Honorary Yearly Bingwa Reward: 🏆<br>
        • Automatic Bingwa for the last two weeks of the year (over the holiday travel season). 🎄🎁<br>
        • Two spins of the Loot Wheel. 🎡<br>
        • Honorary Eregosphere Trophy. 🏅<br>
      </p>
    </details>

    <hr>
    
    <details><summary>🎮 CHALLENGE GAMES 🎮</summary>
      <ul>
        <li>🏐 Volleyball - best of 3 🏐</li>
        <li>🏸 Badminton - best of 3 🏸</li>
        <li>🎾 Tennis - best of 3 🎾</li>
        <li>⛳ Golf - 3 random holes ⛳</li>
        <li>🤺 Chambara - best of 3 🤺</li>
        <li>⚽ Soccer - 1 game of 4-on-4 ⚽</li>
        <li>🎳 Bowling - 1 standard game 🎳</li>
        <li>🎳❓ Bowling - 1 special game 🎳</li>
      </ul>

      <p>
        <em> 
          If the Bingwa wins two consecutive weeks in Switch Sports, the Kushindwa can evoke a "Kushindwa Rights Challenge" ❔ and challenge the Bingwa to any other two-player competitive game instead of Switch Sports until the Kushindwa wins. 💪<br>
          • For Volleyball and Soccer, the CPU is set to "strong". 🤖<br>
          • Players cannot choose the game they most recently picked. 🔄<br>
          • In case of a tie, the game is played again. 🔁<br>
          • If there's a second tie, the Kushindwa chooses any PVP game to determine the winner. 🎲
        </em>
      </p>
    </details>

    <hr>

    <details><summary>❔ FAQ ❔</summary>
      <p>
        [FAQ content here]
      </p>
    </details>

    <hr>

    <details><summary>🚀 MODS 🚀</summary>
      <p>
        See <a href="MODS.html">MODS</a> page for details.
      </p>
    </details>
    <hr>
  </div>
  

<div id="atleticoRules" class="glass-effect">
  <h3>🏆 Atlético Challenge Rules 🏆</h3>

  <details>
    <summary>🏀 ErgoHOOPS RULES 🏀</summary>
    <p></p>
      <b>Objective:</b> The offensive player tries to score, and the defensive player tries to prevent the offensive player from scoring. 🛡️ The first player to 10 points wins and is allowed to decide the first chore for each player during Saturday cleaning hour. 🧹
    </p>

    <h4>Setup:</h4>
    <ul class="rules-list">
      <li><b>Offensive Player:</b> Starts outside the 3-point line, off from the free-throw line, on either side of the basket. ⛹️‍♀️⛹️‍♂️</li>
      <li><b>Defensive Player:</b> Starts on the elbow on the opposite side of the offensive player. 🧍‍♀️🧍‍♂️
        <ul class="rules-list">
          <li><b>Handicap:</b> If there is a height advantage, the defensive player is allowed to start behind the first hash from the free-throw line. 📏</li>
        </ul>
      </li>
    </ul>

    <h4>Rules:</h4>
    <ul class="rules-list">
      <li>All three-point shots are worth 2 points. 🏀</li>
      <li>All other shots are worth 1 point. ⛹️‍♀️⛹️‍♂️</li>
      <li>No bounce passes are allowed. 🚫</li>
      <li>Must win by 2 points. ✌️</li>
      <li>The offensive player must say the score and check the ball before starting. 🗣️
        <ul class="rules-list">
          <li>The offensive player is allowed to confirm the score before stating it, but if either checking the ball or stating the score is not done or the wrong score is stated, the offensive player forfeits their turn. ❌</li>
        </ul>
      </li>
      <li>The offensive player can drive for a layup, take a jump shot, or shoot from the 3-point line where they are starting. ⛹️‍♀️⛹️‍♂️</li>
      <li>Once the offensive player starts dribbling, the defensive player can leave their position and defend. 🏃‍♀️🏃‍♂️
        <ul class="rules-list"></ul>
          <li>If the defender leaves their starting spot before the offensive player starts dribbling, the offensive player is allowed a free throw and regains possession. 🏀</li>
        </ul>
      </li>
      <li>If the offensive player makes their shot, they are given a free opportunity at a three-point shot on the opposite side of where they started. 🔄
        <ul class="rules-list">
          <li>The defender must wait until the offensive player is set before passing them the ball. ⛹️‍♀️⛹️‍♂️</li>
        </ul>
      </li>
      <li><b>Make It Take It:</b> If the offensive player makes the three-pointer, they get to be on offense again. 🔄</li>
      <li>If the offensive player misses the three-point shot, then the turn is over and the roles switch. 🔁</li>
      <li>In the event of a clear/agreed-upon foul, the offensive player is allowed a free turn. ➕</li>
    </ul>

    <p><b>Mods:</b> Players may use mods from the ATLETICO MODS section to enhance or change gameplay. 🚀</p>

    <p><b>Additional Notes:</b></p>
    <ul class="rules-list">
      <li>Remember, this game is about having fun and friendly competition with your partner. 😊</li>
      <li>In the spirit of good sportsmanship, always be respectful of each other and the game's rules. 🤝</li>
      <li>If any disputes arise, refer back to these rules and discuss them together to find a fair resolution. 💬</li>
    </ul>
  </details>
    <details>
    <summary>⛳ ErgoGOLF RULES ⛳</summary>
    <p></p>
      <b>Objective:</b> Be the first player to reach 10 points and win the game! 🏅 The winner gets to choose the 🏋🏽‍♀️🏋🏽‍♂️ATLETICO CHAMP GROUP WOROUT! on Wednesday morning and decide the first chore for each player during Saturday cleaning hour. 🧹
    </p>

    <h4>Setup:</h4>
    <ol class="rules-list">
      <li><b>Putting Green:</li>
      <li><b>Center Line:</li>
      <li><b>Chipping Setup:</li>
      <li><b>Game Balls:</li>
      <li><b>Velcro Balls:</li>
      <li><b>Scoreboard:</li>
    </ol>

    <h4>Gameplay:</h4>
    <ol class="rules-list">
      <li><b>Starting Player:</li>
      <li><b>Chipping:</li>
      <li><b>Determining Putts:</li>
      <li><b>Putting:</li>
      <li><b>Scoring:</li>
      <li><b>Clarification on Velcro Balls:</li>
    </ol>

    <p><b>Winning:</b> The first player to reach 10 points wins! 🏆</p>
    <p><b>Mods:</b> Players may use mods from the ATLETICO MODS section to enhance or change gameplay. 🚀</p>

    <p><b>Additional Notes:</b></p>
    <ul class="rules-list">
      <li>Remember, this game is about having fun and friendly competition with your partner. 😊</li>
      <li>In the spirit of good sportsmanship, always be respectful of each other and the game's rules. 🤝</li>
      <li>If any disputes arise, refer back to these rules and discuss them together to find a fair resolution. 💬</li>
    </ul>
  </details>
  <hr>
</div>

<div id="ErgoBazaarRules" class="glass-effect">
  <h3>🛒 ErgoBazaar Rules 🛒</h3>

  <details>
    <summary>📜 RULES 📜</summary>
    <p>The ErgoBazaar is a weekly event that happens every Saturday. 📅 During this time, players can exchange their hard-earned digital gold from Habitica for physical Ducats. 💰</p>
    <p>Ducats can be used to purchase a variety of items and services, including ErgoShop 🍎, MODS 🚀, and Contracts 📜. </p>
    <p>Players can also choose to keep some of their gold as digital currency in Habitica to use in the Habitica store or for Habitica armor and potions. 🛡️ </p>
  </details>

  <hr>

  <details>
    <summary>🛒 SHOPPING 🛒</summary>
    <p>During the ErgoBazaar, players can browse the available items and services and make purchases using their Ducats. 🛍️</p>
    <p>The available items and services are updated regularly, so there's always something new to discover. ✨</p>
  </details>

  <hr>

  <details>
    <summary>📜 CONTRACTS 📜</summary>
    <p>Players can use their Ducats to purchase Contracts, which are agreements between players to provide certain services or perform certain tasks. 🤝</p>
    <p>Contracts can be a great way to get help with things you need or to earn extra Ducats by completing tasks for other players. 💪</p>
    <p>Some examples of Contracts include:
      <ul>
        <li>Tag in a partner 🎮</li>
        <li>Study Buddy 📚</li>
        <li>Workout Buddy 🏋️‍♀️</li>
        <li>Personal Chef 👨‍🍳</li>
        <li>Massage 💆‍♀️</li>
        <li>Hero for Hire 🦸‍♀️</li>
      </ul>
    </p>
  </details>

  <hr>

  <details>
    <summary>🚀 MODS 🚀</summary>
    <p>MODS are special abilities or modifications that can be purchased with Ducats to enhance gameplay or provide other benefits. 🚀</p>
    <p>There are a variety of MODS available, each with its own unique effects. ✨</p>
    <p>Players can use MODS to gain an advantage in games, change the rules of challenges, or even influence the outcome of events. 🤯</p>
  </details>

  <hr>

  <details>
    <summary>📅 SCHEDULE 📅</summary>
    <p>The ErgoBazaar is open every Saturday, but the specific times may vary. ⏰</p>
    <p>Be sure to check the ErgoSphere calendar 📅 to see when the next Shop will be open. </p>
    <p>Don't miss out on the chance to stock up on ErgoShop, MODS, Contracts, and Casino bets! 🛍️</p>
  </details>

  <hr>

  <p><b>Additional Notes:</b></p>
  <ul>
    <li>Remember, the ErgoBazaar is a fun and exciting way to enhance your ErgoSphere experience. 😊</li>
    <li>Use your Ducats wisely and have fun shopping! 🛍️</li>
   
  </ul>
</div>

<hr>

  <details>
    <summary>⚙️ ADMIN CONTROLS ⚙️</summary>
    <div class="admin-section">
      <h3>Week Management</h3>
      <div class="week-info">
        <p>Current Week: <span id="current-week-display" class="week-number"></span></p>
        <p>Week Start Date: <span id="week-start-date"></span></p>
        <p>Current Quarter: <span class="quarter-number"></span></p>
      </div>
      <div class="admin-controls">
        <button id="start-new-week" class="admin-button">Start New Week</button>
        <button id="refresh-week" class="admin-button">Refresh Week Data</button>
      </div>
      <p class="hint-text">Note: Starting a new week will affect all week-based features across ErgoSphere.</p>
    </div>
  </details>

  <hr>

  <p><b>Additional Notes:</b></p>
  <ul>
    <li>As an admin, you have the power to manage the weekly events and challenges. Use these controls wisely!</li>
    <li>Always double-check the week start date and current quarter before starting a new week.</li>
    <li>If you encounter any issues, refer to the admin guidelines or contact support.</li>
  </ul>
</div>
</main>  <script src="js/utils.js"></script>
  <script src="js/week-tracker.js"></script>
  <script src="js/script.js"></script>
  <script src="js/index-specific.js"></script> <!-- Added new script for index.html specific functions -->  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Initialize the universal week tracker
      WeekTracker.init();
      
      // Initialize week management UI
      initWeekManagementUI();

      const sidebar = document.getElementById('sidebar');
      const mainContent = document.getElementById('main-content');
      const sidebarToggle = document.getElementById('sidebar-toggle');
      let touchstartX = 0;
      let touchendX = 0;
      const swipeThreshold = 100; // Define a swipe threshold
      const veryLargeScreenQuery = window.matchMedia('(min-width: 1800px)');
      const largeScreenQuery = window.matchMedia('(min-width: 1024px)');
      const tabletScreenQuery = window.matchMedia('(min-width: 601px) and (max-width: 1023px)');

      function toggleSidebar(visible) {
        if (visible) {
          sidebar.classList.remove('hidden');
          mainContent.classList.add('sidebar-visible');
          if (sidebarToggle) sidebarToggle.setAttribute('aria-expanded', 'true');
        } else {
          sidebar.classList.add('hidden');
          mainContent.classList.remove('sidebar-visible');
          if (sidebarToggle) sidebarToggle.setAttribute('aria-expanded', 'false');
        }
      }      function handleGesture() {
        if (touchendX < touchstartX - swipeThreshold) {
          toggleSidebar(true); // Swipe left (right to left) to show
        }
        if (touchendX > touchstartX + swipeThreshold) {
          toggleSidebar(false); // Swipe right (left to right) to hide
        }
      }

      // Handle sidebar visibility based on screen size
      function handleScreenSizeChange() {
        if (veryLargeScreenQuery.matches || largeScreenQuery.matches) {
          // On large and very large screens, sidebar is always visible
          toggleSidebar(true);
          if (sidebarToggle) sidebarToggle.style.display = 'none'; // Hide toggle
        } else if (tabletScreenQuery.matches) {
          // On tablet-sized screens, sidebar is toggleable, initially hidden
          toggleSidebar(false); // Or true if you want it initially visible
          if (sidebarToggle) sidebarToggle.style.display = 'block'; // Show toggle
        } else {
          // On smaller screens (phones), sidebar is swipeable, initially hidden
          toggleSidebar(false);
          if (sidebarToggle) sidebarToggle.style.display = 'none'; // Hide toggle
        }
      }

      // Sidebar toggle button event listener
      if (sidebarToggle) {
        sidebarToggle.addEventListener('click', () => {
          const isSidebarVisible = !sidebar.classList.contains('hidden');
          toggleSidebar(!isSidebarVisible);
        });
      }

      // Run on page load
      handleScreenSizeChange();

      // Add resize listener
      window.addEventListener('resize', handleScreenSizeChange);

      // Add touch listeners only if not on a very large or large screen initially
      if (!veryLargeScreenQuery.matches && !largeScreenQuery.matches) {
        document.addEventListener('touchstart', e => {
          touchstartX = e.changedTouches[0].screenX;
        }, { passive: true });

        document.addEventListener('touchend', e => {
          touchendX = e.changedTouches[0].screenX;
          // Handle gesture for both phone and tablet screens
          handleGesture();
        }, { passive: true });
      }

      // Add media query listeners to handle dynamic screen size changes
      veryLargeScreenQuery.addListener(handleScreenSizeChange);
      largeScreenQuery.addListener(handleScreenSizeChange);
      tabletScreenQuery.addListener(handleScreenSizeChange);
    });
    
    // Additional script to ensure alignment is correct on load
    window.addEventListener('load', function() {
      // Force recalculation of styles to ensure proper centering
      document.body.style.display = 'none';
      setTimeout(function() {
        document.body.style.display = '';
      }, 10);
    });
  </script>
</body>
</html>