<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Special Moves Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #1a1a1a; color: white; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #333; border-radius: 5px; }
        .pass { color: #4CAF50; }
        .fail { color: #f44336; }
        .test-result { margin: 10px 0; }
        button { padding: 10px 20px; margin: 5px; background: #333; color: white; border: 1px solid #555; cursor: pointer; }
        button:hover { background: #555; }
        #testOutput { background: #222; padding: 15px; border-radius: 5px; min-height: 200px; white-space: pre-wrap; }
    </style>
</head>
<body>    <h1>🌌 Enhanced Special Moves Test Suite - COMBO EDITION</h1>
    
    <div class="test-section">
        <h2>🎯 Test Controls</h2>
        <button onclick="runAllTests()">Run All Tests</button>
        <button onclick="testJaybers8Healing()">Test Jaybers8 Single 8</button>
        <button onclick="testJaybers8UltimateHealing()">Test Jaybers8 DOUBLE 8s</button>
        <button onclick="testFlightShield()">Test Flight Single 12</button>
        <button onclick="testFlightFortressShield()">Test Flight DOUBLE 12s</button>
        <button onclick="testMultiplayerBonus()">Test Multiplayer Bonus</button>
        <button onclick="clearOutput()">Clear Output</button>
    </div>
    
    <div class="test-section">
        <h2>🔍 Test Output</h2>
        <div id="testOutput">Ready to run tests...</div>
    </div>

    <script src="js/monsters.js"></script>
    <script src="js/trivia.js"></script>
    <script src="js/BossFight.js"></script>
    
    <script>
        let testOutput = document.getElementById('testOutput');
        
        function log(message, isError = false) {
            const timestamp = new Date().toLocaleTimeString();
            const prefix = isError ? '❌' : '✅';
            testOutput.textContent += `[${timestamp}] ${prefix} ${message}\n`;
            testOutput.scrollTop = testOutput.scrollHeight;
        }
        
        function clearOutput() {
            testOutput.textContent = 'Output cleared...\n';
        }
          function runAllTests() {
            clearOutput();
            log('🚀 Starting Enhanced Special Moves Test Suite - COMBO EDITION');
            log('========================================================');
            
            testJaybers8Healing();
            testJaybers8UltimateHealing();
            testFlightShield();
            testFlightFortressShield();
            testMultiplayerBonus();
            
            log('========================================================');
            log('✨ All combo tests completed!');
        }
        
        function testJaybers8Healing() {
            log('🩹 Testing Jaybers8 Single 8 Healing Special Move');
            
            try {
                const testConditions = {
                    currentPlayer: 'Jaybers8',
                    playerRoll: 8,
                    rollCount: 1,
                    bossHits: { Jaybers8: 2, Flight: 1 }
                };
                
                log(`Testing single 8 with conditions: ${JSON.stringify(testConditions)}`);
                log('Expected: 100 damage + remove 1 boss hit + healing effect');
                
            } catch (error) {
                log(`Error in Jaybers8 healing test: ${error.message}`, true);
            }
        }
        
        function testJaybers8UltimateHealing() {
            log('✨ Testing Jaybers8 DOUBLE 8s - ULTIMATE HEALING SURGE');
            
            try {
                const testConditions = {
                    currentPlayer: 'Jaybers8',
                    playerRolls: [8, 8],
                    rollCount: 2,
                    bossHits: { Jaybers8: 5, Flight: 3 },
                    isMultiplayer: true
                };
                
                log(`Testing DOUBLE 8s with conditions: ${JSON.stringify(testConditions)}`);
                log('Expected: 100 damage + heal 4 hits from BOTH players + ultimate healing effect');
                log('Solo mode would heal 4 hits from Jaybers8 only');
                
            } catch (error) {
                log(`Error in Jaybers8 ultimate healing test: ${error.message}`, true);
            }
        }
        
        function testFlightShield() {
            log('🛡️ Testing Flight Single 12 Shield Special Move');
            
            try {
                const testConditions = {
                    currentPlayer: 'Flight',
                    playerRoll: 12,
                    rollCount: 1,
                    shieldsActive: 0
                };
                
                log(`Testing single 12 with conditions: ${JSON.stringify(testConditions)}`);
                log('Expected: 100 damage + activate 1 shield + shield effect');
                
            } catch (error) {
                log(`Error in Flight shield test: ${error.message}`, true);
            }
        }
        
        function testFlightFortressShield() {
            log('🌀 Testing Flight DOUBLE 12s - FORTRESS SHIELD');
            
            try {
                const testConditions = {
                    currentPlayer: 'Flight',
                    playerRolls: [12, 12],
                    rollCount: 2,
                    shieldsActive: 0,
                    protectsBothPlayers: true
                };
                
                log(`Testing DOUBLE 12s with conditions: ${JSON.stringify(testConditions)}`);
                log('Expected: 100 damage + activate 5 shields + fortress shield effect');
                log('Shields protect BOTH Jaybers8 and Flight from next 5 hits total');
                
            } catch (error) {
                log(`Error in Flight fortress shield test: ${error.message}`, true);
            }
        }
        
        function testMultiplayerBonus() {
            log('💪 Testing Multiplayer Damage Bonus');
            
            try {
                // Test damage calculation logic
                const baseDamage = 50;
                const singlePlayerDamage = baseDamage; // No bonus
                const multiplayerDamage = Math.floor(baseDamage * 1.2); // 20% bonus
                
                log(`Base damage: ${baseDamage}`);
                log(`Single player (no bonus): ${singlePlayerDamage}`);
                log(`Multiplayer (+20% bonus): ${multiplayerDamage}`);
                
                if (multiplayerDamage === 60) {
                    log('✓ Multiplayer bonus calculation correct (50 * 1.2 = 60)');
                } else {
                    log('✗ Multiplayer bonus calculation incorrect', true);
                }
                
            } catch (error) {
                log(`Error in multiplayer bonus test: ${error.message}`, true);
            }
        }
        
        // Check if required objects exist on page load
        window.addEventListener('load', function() {
            setTimeout(() => {
                log('🔍 Checking required game objects...');
                
                if (typeof gameStats !== 'undefined') {
                    log('✓ gameStats object found');
                    log(`gameStats keys: ${Object.keys(gameStats).join(', ')}`);
                } else {
                    log('✗ gameStats object not found', true);
                }
                
                if (typeof monsters !== 'undefined') {
                    log('✓ monsters object found');
                } else {
                    log('✗ monsters object not found', true);
                }
                
                if (typeof trivia !== 'undefined') {
                    log('✓ trivia object found');
                } else {
                    log('✗ trivia object not found', true);
                }
                
            }, 1000);
        });
    </script>
</body>
</html>
