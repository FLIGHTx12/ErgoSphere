<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mobile Arena Test</title>
    <style>
        /* Basic styles for testing */
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: #1a1a1a;
            color: white;
        }
        
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #333;
            border-radius: 8px;
        }
        
        .mobile-indicator {
            padding: 10px;
            background: #333;
            border-radius: 5px;
            margin: 10px 0;
        }
        
        .responsive-test {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        @media screen and (max-width: 799px) {
            .responsive-test {
                grid-template-columns: 1fr;
            }
            
            .mobile-only {
                display: block !important;
            }
            
            .desktop-only {
                display: none !important;
            }
        }
        
        .mobile-only {
            display: none;
            background: #27ae60;
            padding: 10px;
            border-radius: 5px;
        }
        
        .desktop-only {
            background: #8e44ad;
            padding: 10px;
            border-radius: 5px;
        }
        
        .test-button {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üéÆ ErgoArena Mobile Test</h1>
        
        <div class="mobile-indicator">
            <strong>Current Screen Width:</strong> <span id="screenWidth"></span>px<br>
            <strong>Device Type:</strong> <span id="deviceType"></span>
        </div>
        
        <div class="test-section">
            <h3>üì± Responsive Layout Test</h3>
            <div class="responsive-test">
                <div class="desktop-only">
                    <h4>üñ•Ô∏è Desktop View</h4>
                    <p>This card appears side-by-side on desktop screens (‚â•800px width)</p>
                </div>
                <div class="desktop-only">
                    <h4>üñ•Ô∏è Desktop View 2</h4>
                    <p>Second card for desktop layout testing</p>
                </div>
            </div>
            
            <div class="mobile-only">
                <h4>üì± Mobile View Active</h4>
                <p>This appears only on mobile screens (&lt;800px width). Cards stack vertically.</p>
            </div>
        </div>
        
        <div class="test-section">
            <h3>üéØ CSS Media Query Test</h3>
            <p>The layout above should change when you resize your browser window below 800px width.</p>
            <button class="test-button" onclick="testResize()">Test Window Resize Detection</button>
        </div>
        
        <div class="test-section">
            <h3>üëÜ Touch/Swipe Test</h3>
            <div id="touchArea" style="background: #333; padding: 40px; border-radius: 8px; text-align: center; margin: 10px 0;">
                <p>Touch/Swipe Area</p>
                <p id="touchStatus">Touch this area and swipe (mobile) or click and drag (desktop)</p>
            </div>
            <div id="swipeResults" style="margin-top: 10px; padding: 10px; background: #444; border-radius: 5px;">
                <strong>Swipe Results:</strong> <span id="swipeData">No swipes detected yet</span>
            </div>
        </div>
          <div class="test-section">
            <h3>üîó Arena Link Test</h3>
            <p>Test the mobile-optimized ErgoArena:</p>
            <a href="ErgoArena.html" class="test-button" style="text-decoration: none; display: inline-block;">
                üöÄ Launch ErgoArena
            </a>
        </div>
        
        <div class="test-section">
            <h3>üéØ Mobile Trivia Overlay Test</h3>
            <p>Test the mobile trivia overlay system:</p>
            <button class="test-button" onclick="testMobileTriviaOverlay()">
                üß† Test Mobile Trivia Overlay
            </button>
            <div id="triviaTestResults" style="margin-top: 10px; padding: 10px; background: #444; border-radius: 5px; display: none;">
                <strong>Trivia Test Results:</strong> <span id="triviaTestData">No tests run yet</span>
            </div>
        </div>
        
        <div class="test-section">
            <h3>üìä Expected Mobile Behavior</h3>
            <ul>
                <li>‚úÖ Screen width &lt; 800px = Mobile mode active</li>
                <li>‚úÖ Setup phase: Fighter/opponent buttons centered and stacked</li>
                <li>‚úÖ Battle phase: Monster container as main full-screen view</li>
                <li>‚úÖ Swipe left ‚Üí Info/Trivia overlay</li>
                <li>‚úÖ Swipe right ‚Üí History overlay</li>
                <li>‚úÖ All modals full-screen with vertical card stacking</li>
                <li>‚úÖ Touch-friendly close buttons (X) on overlays</li>
            </ul>
        </div>
    </div>

    <script>
        // Update screen info
        function updateScreenInfo() {
            const width = window.innerWidth;
            document.getElementById('screenWidth').textContent = width;
            document.getElementById('deviceType').textContent = width < 800 ? 'Mobile (< 800px)' : 'Desktop (‚â• 800px)';
        }
        
        // Test resize detection
        function testResize() {
            alert(`Current width: ${window.innerWidth}px\nMobile mode: ${window.innerWidth < 800 ? 'YES' : 'NO'}`);
        }
        
        // Touch/swipe testing
        let touchStartX = 0;
        let touchStartY = 0;
        
        const touchArea = document.getElementById('touchArea');
        const touchStatus = document.getElementById('touchStatus');
        const swipeData = document.getElementById('swipeData');
        
        // Touch events
        touchArea.addEventListener('touchstart', (e) => {
            const touch = e.touches[0];
            touchStartX = touch.clientX;
            touchStartY = touch.clientY;
            touchStatus.textContent = 'Touch started...';
        });
        
        touchArea.addEventListener('touchend', (e) => {
            const touch = e.changedTouches[0];
            const deltaX = touch.clientX - touchStartX;
            const deltaY = touch.clientY - touchStartY;
            
            let direction = 'tap';
            if (Math.abs(deltaX) > 50) {
                direction = deltaX > 0 ? 'right swipe' : 'left swipe';
            } else if (Math.abs(deltaY) > 50) {
                direction = deltaY > 0 ? 'down swipe' : 'up swipe';
            }
            
            touchStatus.textContent = `Touch ended - ${direction}`;
            swipeData.textContent = `${direction} (ŒîX: ${deltaX}, ŒîY: ${deltaY})`;
        });
        
        // Mouse events for desktop testing
        let mouseDown = false;
        let mouseStartX = 0;
        
        touchArea.addEventListener('mousedown', (e) => {
            mouseDown = true;
            mouseStartX = e.clientX;
            touchStatus.textContent = 'Mouse down...';
        });
        
        touchArea.addEventListener('mouseup', (e) => {
            if (mouseDown) {
                const deltaX = e.clientX - mouseStartX;
                let direction = Math.abs(deltaX) > 50 ? (deltaX > 0 ? 'right drag' : 'left drag') : 'click';
                touchStatus.textContent = `Mouse up - ${direction}`;
                swipeData.textContent = `${direction} (ŒîX: ${deltaX})`;
            }
            mouseDown = false;
        });
        
        // Initialize and update on resize
        updateScreenInfo();
        window.addEventListener('resize', updateScreenInfo);
          // Log mobile detection
        console.log('Mobile detection test:', {
            screenWidth: window.innerWidth,
            isMobile: window.innerWidth < 800,
            userAgent: navigator.userAgent,
            touchSupport: 'ontouchstart' in window
        });
        
        // Test mobile trivia overlay functionality
        function testMobileTriviaOverlay() {
            const resultsDiv = document.getElementById('triviaTestResults');
            const dataSpan = document.getElementById('triviaTestData');
            
            resultsDiv.style.display = 'block';
            
            // Create a test trivia container
            const testTriviaContainer = document.createElement('div');
            testTriviaContainer.id = 'testTriviaContainer';
            testTriviaContainer.className = 'trivia-container';
            testTriviaContainer.innerHTML = `
                <div class="trivia-header">
                    <h3>üß† TEST TRIVIA OVERLAY</h3>
                    <div class="multiplier-display">Test Mode Active</div>
                </div>
                <div class="question-container">
                    <div class="question-text">This is a test trivia overlay for mobile responsiveness.</div>
                    <button onclick="closeTriviaTest()" style="padding: 15px; margin: 20px; background: #e74c3c; color: white; border: none; border-radius: 5px; font-size: 1.1rem;">Close Test</button>
                </div>
            `;
            
            testTriviaContainer.style.display = 'block';
            document.body.appendChild(testTriviaContainer);
            
            // Test mobile overlay activation
            if (window.innerWidth < 800) {
                testTriviaContainer.classList.add('mobile-overlay-active');
                dataSpan.textContent = 'Mobile trivia overlay activated! Should be full-screen.';
            } else {
                dataSpan.textContent = 'Desktop mode - trivia overlay shown normally.';
            }
            
            // Global function to close test
            window.closeTriviaTest = function() {
                testTriviaContainer.remove();
                dataSpan.textContent = 'Test completed and cleaned up.';
            };
        }
    </script>
</body>
</html>
