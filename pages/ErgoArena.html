<!DOCTYPE html>
<html lang="en">
<head>    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <title>ErgoSphere ARENA</title>    <link rel="stylesheet" href="../css/ErgoArena.css">
    <link rel="stylesheet" href="../css/themed-cursors.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><circle cx=%2250%22 cy=%2250%22 r=%2240%22 fill=%22black%22/><circle cx=%2280%22 cy=%2220%22 r=%2212%22 fill=%22lime%22 opacity=%220.4%22/><circle cx=%2275%22 cy=%2225%22 r=%228%22 fill=%22lime%22/><circle cx=%2225%22 cy=%2275%22 r=%228%22 fill=%22purple%22/></svg>" />
</head>
<body>
    <div class="arena-background"></div>
    <div class="moving-stars"></div>
    
    <header>
        <div class="header-top-row">
            <div id="monsterButtons" class="monster-buttons">
                <!-- Buttons for selecting monsters will be added here by JavaScript -->
            </div>            <h1>ErgoSphere ARENA</h1>            <div class="navbar" id="navbar">
                <a href="../index.html" id="leaveArenaBtn" class="menu-button">
                    <i class="fas fa-arrow-left"></i> Leave Arena
                </a>
                <button id="howToPlayBtn" class="menu-button">
                    <i class="fas fa-question-circle"></i> How To Play
                </button>
            </div>
        </div>
    </header>

    <main>
        <div class="game-container">
              <!-- How To Play Modal -->
            <div id="howToPlayModal" class="modal">
                <div class="modal-overlay"></div>
                <div class="battle-manual-content">
                    <span class="close">&times;</span>
                    <div class="manual-header">
                        <h2>🌌 ErgoSphere ARENA - Battle Manual 🌌</h2>
                        <div class="manual-subtitle">Ultimate Combat & Dimension Sync Guide</div>
                    </div>
                      <div class="manual-columns">
                        <div class="manual-column">
                            <div class="section-card">
                                <h3>🌀 Entry Modes</h3>
                                <p><strong>🔬 HCMC Portal Mode:</strong> While using the HCMC machine to smash Higgs Bosons, players may accidentally open a portal to ErgoArena. Choose to battle the villain or run away and accept their punishment.</p>
                                <p><strong>🪄 Summon Mode:</strong> During weekdays, players can actively summon an ErgoVillain using particles. Rewards: 50 Ducats (scalable with boss tier) + early Habitica gold cashout before Saturday ErgoBazaar.</p>
                            </div>
                            
                            <div class="section-card">
                                <h3>🎯 Combat Overview</h3>
                                <p>Two elite fighters (Jaybers8 and FLIGHTx12!) unite to battle powerful dimensional monsters. Master both combat tactics and dimensional knowledge to achieve victory!</p>
                            </div>
                            
                            <div class="section-card">
                                <h3>🎮 Controls</h3>
                                <div class="controls-grid">
                                    <div class="control-item"><kbd>Enter</kbd> Attack with inputs</div>
                                    <div class="control-item"><kbd>Space</kbd> Switch players</div>
                                    <div class="control-item"><kbd>Tab</kbd> Cycle inputs</div>
                                    <div class="control-item"><kbd>+</kbd> Add input</div>
                                    <div class="control-item"><kbd>-</kbd> Remove input</div>
                                    <div class="control-item"><kbd>📱 Swipe</kbd> View panels</div>
                                    <div class="control-item"><kbd>A</kbd> Trivia Answer 1</div>
                                    <div class="control-item"><kbd>S</kbd> Trivia Answer 2</div>
                                    <div class="control-item"><kbd>D</kbd> Trivia Answer 3</div>
                                </div>
                            </div>
                              <div class="section-card">
                                <h3>🧠 Strategy Tips</h3>
                                <ol>
                                    <li><strong>Study monster hit numbers</strong> - avoid triggering counters</li>
                                    <li><strong>Build Memory Sync</strong> - trivia knowledge = massive damage</li>
                                    <li><strong>Use special moves wisely</strong> - 8 and 12 for guaranteed big damage</li>
                                    <li><strong>Time management</strong> - balance speed with accuracy</li>
                                    <li><strong>Risk vs Reward</strong> - wrong trivia answers cost you multiplier progress</li>
                                    <li><strong>Prepare for Astral Coalescence</strong> - save Habitica mana, skills, and potions for post-battle survival</li>
                                </ol>
                            </div>                            <div class="section-card" style="border-color: #8e44ad;">
                                <h3>🌌 Astral Coalescence Phase</h3>
                                <p><strong>Individual Trials:</strong> After battle, each player faces their own astral trial based on hits received during combat.</p>                                <div class="sync-mechanics">
                                    <div class="sync-item wrong">🐿️ Jaybers8 takes her hits solo in Habitica</div>
                                    <div class="sync-item timeout">🐨 FLIGHTx12! takes his hits separately</div>
                                    <div class="sync-item correct">⚖️ Each reports survival independently</div>
                                </div>
                                <p><strong>Victory Levels:</strong> 🏆 Both survive = Full rewards | ⚰️ One survives = Partial rewards | 💀 Both die = No rewards</p>
                            </div>
                        </div>
                          <div class="manual-column">
                            <div class="section-card">
                                <h3>⚔️ Damage System</h3>
                                <ul>
                                    <li><strong>Regular Damage:</strong> Any safe number = that damage</li>
                                    <li><strong>Special Moves:</strong>
                                        <ul>
                                            <li><span class="player-jaybers">Jaybers8: "8" = 100 DMG</span></li>
                                            <li><span class="player-flight">FLIGHTx12!: "12" = 100 DMG</span></li>
                                        </ul>
                                    </li>
                                    <li><strong>⚠️ Counter-Attacks:</strong> Monster's hit numbers trigger retaliation</li>
                                </ul>
                            </div>                            <div class="section-card">
                                <h3>🏆 Victory Conditions & Rewards</h3>
                                <p><strong>🎯 Three-Tier Victory System:</strong> Rewards depend on battle outcome + individual player survival!</p>
                                <p><strong>🏆 Ultimate Victory:</strong> Battle won + both players survive Astral = Full rewards</p>
                                <p><strong>⚰️ Partial Victory:</strong> Battle won + one player survives = 50% rewards</p>
                                <p><strong>💀 Defeat/Pyrrhic:</strong> Battle lost OR both players die = No rewards/Punishment</p>
                                <p><strong>🪄 Summon Mode:</strong> 50 Ducats + gold cashout | <strong>🔬 HCMC Portal:</strong> Boss-specific rewards</p>
                            </div>
                            
                            <div class="section-card dimension-sync">
                                <h3>🌐 Dimension Sync (NEW!)</h3>
                                <p>Answer interdimensional trivia to boost your Memory Sync multiplier!</p>
                                <div class="sync-mechanics">
                                    <div class="sync-item correct">✅ Correct Answer: <strong>+0.5× Memory Sync</strong></div>
                                    <div class="sync-item wrong">❌ Wrong Answer: <strong>-5.0× Memory Sync + Boss heals 50 HP</strong></div>
                                    <div class="sync-item timeout">⏰ Timeout: <strong>Boss heals 20 HP</strong></div>
                                </div>
                                <p><strong>Categories:</strong> History, Music, Games, Sports, Movies, Construction, Coding, Spanish-English, Minneapolis-Chicago</p>
                            </div>
                        </div>
                    </div>
                      <div class="manual-footer">
                        <div class="version-info">Battle Manual v3.0 | Dual-Mode Combat & Astral Coalescence Guide</div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <p>ErgoSphere ARENA &copy; 2025 | <a href="#" id="creditsLink">Credits</a></p>
    </footer>    <!-- Load JavaScript files -->
    <script src="../js/week-tracker.js"></script>
    <script>
        // Initialize WeekTracker as soon as it loads
        if (typeof WeekTracker !== 'undefined') {
            WeekTracker.init();
            console.log('WeekTracker initialized for current quarter:', WeekTracker.getCurrentQuarter());
        } else {
            console.warn('WeekTracker not loaded properly');
        }
    </script>    <script src="../js/monsters.js"></script>
    <script src="../js/trivia.js"></script>
    <script src="../js/BossFight.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <script>
        // Modal functionality - run immediately
        window.addEventListener('load', function() {
            console.log('Window loaded, setting up modal...');
            
            const modal = document.getElementById('howToPlayModal');
            const btn = document.getElementById('howToPlayBtn');
            const span = document.getElementsByClassName('close')[0];
            const overlay = document.querySelector('.modal-overlay');

            console.log('Modal elements found:', {modal: !!modal, btn: !!btn, span: !!span, overlay: !!overlay});

            // Show modal on page load with fallback styling
            if (modal) {
                console.log('Showing modal on page load...');
                modal.style.display = 'block';
                modal.style.position = 'fixed';
                modal.style.top = '0';
                modal.style.left = '0';
                modal.style.width = '100%';
                modal.style.height = '100%';
                modal.style.zIndex = '9999';
                modal.style.backgroundColor = 'rgba(0, 0, 0, 0.9)';
            }

            // Button click handler
            if (btn) {
                btn.onclick = function(e) {
                    e.preventDefault();
                    console.log('How to Play button clicked');
                    modal.style.display = 'block';
                    modal.style.position = 'fixed';
                    modal.style.top = '0';
                    modal.style.left = '0';
                    modal.style.width = '100%';
                    modal.style.height = '100%';
                    modal.style.zIndex = '9999';
                    modal.style.backgroundColor = 'rgba(0, 0, 0, 0.9)';
                }
            }

            // Close button handler
            if (span) {
                span.onclick = function(e) {
                    e.preventDefault();
                    console.log('Close button clicked');
                    modal.style.display = 'none';
                }
            }

            // Overlay click handler
            if (overlay) {
                overlay.onclick = function(e) {
                    console.log('Overlay clicked, closing modal...');
                    modal.style.display = 'none';
                }
            }

            // Click outside modal to close (handle both modal and overlay)
            window.onclick = function(event) {
                if (event.target == modal || event.target.classList.contains('modal-overlay')) {
                    console.log('Clicked outside modal content, closing...');
                    modal.style.display = 'none';
                }
            }

            // Escape key handler
            document.addEventListener('keydown', function(event) {
                if (event.key === 'Escape' && modal.style.display === 'block') {
                    console.log('Escape key pressed, closing modal...');
                    modal.style.display = 'none';
                }
            });        });

        // Initialize remaining functionality
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded, setting up remaining functionality...');

            // Credits click handler
            document.getElementById('creditsLink').addEventListener('click', function(e) {
                e.preventDefault();
                alert('ErgoSphere ARENA\nDesigned by: FLIGHT\nDeveloped by: FLIGHT and Jaybers8\nSpecial thanks to the ErgoSphere community');
            });
        });
    </script>
</body>
</html>
