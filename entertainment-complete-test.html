<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Entertainment Page - Complete Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #000 0%, #2d1b69 50%, #000 100%);
            color: #fff;
            min-height: 100vh;
        }
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .test-header {
            text-align: center;
            margin-bottom: 2rem;
            padding: 2rem;
            background: rgba(128, 0, 128, 0.2);
            border-radius: 20px;
            border: 1px solid rgba(169, 175, 185, 0.3);
        }
        .test-section {
            margin: 2rem 0;
            padding: 1.5rem;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 15px;
            border: 1px solid rgba(128, 0, 128, 0.3);
        }
        .test-result {
            margin: 1rem 0;
            padding: 1rem;
            border-radius: 8px;
            border-left: 4px solid;
        }
        .success { 
            background: rgba(16, 185, 129, 0.1); 
            border-left-color: #10b981;
            color: #10b981;
        }
        .error { 
            background: rgba(239, 68, 68, 0.1); 
            border-left-color: #ef4444;
            color: #ef4444;
        }
        .warning { 
            background: rgba(245, 158, 11, 0.1); 
            border-left-color: #f59e0b;
            color: #f59e0b;
        }
        .loading { 
            background: rgba(139, 92, 246, 0.1); 
            border-left-color: #8b5cf6;
            color: #8b5cf6;
        }
        .test-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin: 1rem 0;
        }
        button {
            background: linear-gradient(45deg, #8b5cf6, #a855f7);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            border: 1px solid rgba(169, 175, 185, 0.3);
        }
        button:hover {
            background: linear-gradient(45deg, #7c3aed, #9333ea);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4);
        }
        .link-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }
        .link-card {
            background: rgba(128, 0, 128, 0.1);
            padding: 1.5rem;
            border-radius: 12px;
            border: 1px solid rgba(169, 175, 185, 0.3);
            text-align: center;
        }
        .link-card a {
            color: #8b5cf6;
            text-decoration: none;
            font-weight: 600;
            font-size: 1.1rem;
        }
        .link-card a:hover {
            color: #a855f7;
            text-decoration: underline;
        }
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        .status-online { background: #10b981; }
        .status-offline { background: #ef4444; }
        .status-loading { background: #f59e0b; animation: pulse 1s infinite; }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-header">
            <h1>🎬 ErgoSphere Entertainment Hub - Complete Test Suite</h1>
            <p>Comprehensive testing and validation of the Netflix-style Entertainment landing page</p>
            <div id="overall-status" class="test-result loading">
                <span class="status-indicator status-loading"></span>
                Initializing test suite...
            </div>
        </div>

        <div class="test-section">
            <h2>🌐 Server & API Status</h2>
            <div class="test-buttons">
                <button onclick="testServerStatus()">Check Server</button>
                <button onclick="testAllAPIs()">Test All APIs</button>
                <button onclick="testDataIntegrity()">Validate Data</button>
            </div>
            <div id="server-results"></div>
        </div>

        <div class="test-section">
            <h2>📋 Page Components</h2>
            <div class="test-buttons">
                <button onclick="testPageStructure()">Test HTML Structure</button>
                <button onclick="testCSSLoading()">Test CSS Loading</button>
                <button onclick="testJavaScript()">Test JavaScript</button>
            </div>
            <div id="component-results"></div>
        </div>

        <div class="test-section">
            <h2>🎯 Navigation & Links</h2>
            <div class="test-buttons">
                <button onclick="testNavigation()">Test Navigation</button>
                <button onclick="testAdminLinks()">Test Admin Links</button>
                <button onclick="testSidebarUpdate()">Test Sidebar</button>
            </div>
            <div id="navigation-results"></div>
        </div>

        <div class="test-section">
            <h2>🚀 Quick Access Links</h2>
            <div class="link-section">
                <div class="link-card">
                    <h3>🎬 Entertainment Hub</h3>
                    <p>Netflix-style landing page</p>
                    <a href="/pages/Entertainment.html" target="_blank">Open Entertainment Page</a>
                </div>
                <div class="link-card">
                    <h3>🏠 Main Site</h3>
                    <p>ErgoSphere home page</p>
                    <a href="/index.html" target="_blank">Open Home Page</a>
                </div>
                <div class="link-card">
                    <h3>📊 Admin Dashboard</h3>
                    <p>Updated without sidebar</p>
                    <a href="/pages/admin/admin.html" target="_blank">Open Admin Dashboard</a>
                </div>
                <div class="link-card">
                    <h3>🎬 Movies Admin</h3>
                    <p>Movie data management</p>
                    <a href="/pages/admin/movies.html" target="_blank">Open Movies Admin</a>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2>📊 Real-time Test Results</h2>
            <div id="live-results"></div>
        </div>
    </div>

    <script>
        let testResults = {};
        
        // Server Status Test
        async function testServerStatus() {
            updateResults('server-results', '<div class="test-result loading">Checking server status...</div>');
            
            try {
                const response = await fetch('/');
                if (response.ok) {
                    updateResults('server-results', '<div class="test-result success">✅ Server is online and responding</div>');
                    testResults.server = true;
                } else {
                    updateResults('server-results', `<div class="test-result error">❌ Server responded with status: ${response.status}</div>`);
                    testResults.server = false;
                }
            } catch (error) {
                updateResults('server-results', `<div class="test-result error">❌ Server connection failed: ${error.message}</div>`);
                testResults.server = false;
            }
        }

        // API Tests
        async function testAllAPIs() {
            updateResults('server-results', '<div class="test-result loading">Testing all API endpoints...</div>');
            
            const apis = [
                { name: 'Movies', endpoint: '/api/data/movies' },
                { name: 'Anime', endpoint: '/api/data/anime' },
                { name: 'CO-OP Games', endpoint: '/api/data/coop' },
                { name: 'PVP Games', endpoint: '/api/data/pvp' },
                { name: 'Single Player', endpoint: '/api/data/singleplayer' },
                { name: 'YouTube', endpoint: '/api/data/youtube' },
                { name: 'Sunday Morning', endpoint: '/api/data/sundaymorning' },
                { name: 'Sunday Night', endpoint: '/api/data/sundaynight' },
                { name: 'Loot', endpoint: '/api/loot' }
            ];
            
            let results = '';
            let allPassed = true;
            
            for (const api of apis) {
                try {
                    const response = await fetch(api.endpoint);
                    if (response.ok) {
                        const data = await response.json();
                        const count = Array.isArray(data) ? data.length : Object.keys(data).length;
                        results += `<div class="test-result success">✅ ${api.name}: ${count} items loaded</div>`;
                    } else {
                        results += `<div class="test-result error">❌ ${api.name}: HTTP ${response.status}</div>`;
                        allPassed = false;
                    }
                } catch (error) {
                    results += `<div class="test-result error">❌ ${api.name}: ${error.message}</div>`;
                    allPassed = false;
                }
            }
            
            testResults.apis = allPassed;
            updateResults('server-results', results);
        }

        // Data Integrity Test
        async function testDataIntegrity() {
            updateResults('server-results', '<div class="test-result loading">Validating data integrity...</div>');
            
            try {
                const response = await fetch('/api/data/movies');
                if (response.ok) {
                    const movies = await response.json();
                    if (Array.isArray(movies) && movies.length > 0) {
                        const sample = movies[0];
                        const hasRequiredFields = sample.Title && sample.imageUrl && sample.DESCRIPTION;
                        
                        if (hasRequiredFields) {
                            updateResults('server-results', `<div class="test-result success">✅ Data integrity check passed (${movies.length} movies with required fields)</div>`);
                            testResults.dataIntegrity = true;
                        } else {
                            updateResults('server-results', '<div class="test-result warning">⚠️ Some required fields missing in data</div>');
                            testResults.dataIntegrity = false;
                        }
                    } else {
                        updateResults('server-results', '<div class="test-result error">❌ No movie data found</div>');
                        testResults.dataIntegrity = false;
                    }
                } else {
                    updateResults('server-results', '<div class="test-result error">❌ Failed to load movie data for integrity check</div>');
                    testResults.dataIntegrity = false;
                }
            } catch (error) {
                updateResults('server-results', `<div class="test-result error">❌ Data integrity test failed: ${error.message}</div>`);
                testResults.dataIntegrity = false;
            }
        }

        // Page Structure Test
        async function testPageStructure() {
            updateResults('component-results', '<div class="test-result loading">Testing page structure...</div>');
            
            try {
                const response = await fetch('/pages/Entertainment.html');
                if (response.ok) {
                    const html = await response.text();
                    const hasHeroSection = html.includes('hero-section');
                    const hasCarousels = html.includes('carousel');
                    const hasModal = html.includes('content-modal');
                    
                    if (hasHeroSection && hasCarousels && hasModal) {
                        updateResults('component-results', '<div class="test-result success">✅ All required page components found</div>');
                        testResults.pageStructure = true;
                    } else {
                        updateResults('component-results', '<div class="test-result error">❌ Missing required page components</div>');
                        testResults.pageStructure = false;
                    }
                } else {
                    updateResults('component-results', '<div class="test-result error">❌ Entertainment page not accessible</div>');
                    testResults.pageStructure = false;
                }
            } catch (error) {
                updateResults('component-results', `<div class="test-result error">❌ Page structure test failed: ${error.message}</div>`);
                testResults.pageStructure = false;
            }
        }

        // CSS Loading Test
        async function testCSSLoading() {
            updateResults('component-results', '<div class="test-result loading">Testing CSS loading...</div>');
            
            try {
                const response = await fetch('/css/entertainment.css');
                if (response.ok) {
                    const css = await response.text();
                    const hasHeroStyles = css.includes('hero-section');
                    const hasCarouselStyles = css.includes('carousel');
                    
                    if (hasHeroStyles && hasCarouselStyles) {
                        updateResults('component-results', '<div class="test-result success">✅ Entertainment CSS loaded successfully</div>');
                        testResults.css = true;
                    } else {
                        updateResults('component-results', '<div class="test-result warning">⚠️ CSS loaded but missing some styles</div>');
                        testResults.css = false;
                    }
                } else {
                    updateResults('component-results', '<div class="test-result error">❌ Entertainment CSS not accessible</div>');
                    testResults.css = false;
                }
            } catch (error) {
                updateResults('component-results', `<div class="test-result error">❌ CSS test failed: ${error.message}</div>`);
                testResults.css = false;
            }
        }

        // JavaScript Test
        async function testJavaScript() {
            updateResults('component-results', '<div class="test-result loading">Testing JavaScript...</div>');
            
            try {
                const response = await fetch('/js/entertainment.js');
                if (response.ok) {
                    const js = await response.text();
                    const hasEntertainmentHub = js.includes('class EntertainmentHub');
                    const hasInitMethod = js.includes('async init()');
                    
                    if (hasEntertainmentHub && hasInitMethod) {
                        updateResults('component-results', '<div class="test-result success">✅ Entertainment JavaScript loaded successfully</div>');
                        testResults.javascript = true;
                    } else {
                        updateResults('component-results', '<div class="test-result warning">⚠️ JavaScript loaded but missing key components</div>');
                        testResults.javascript = false;
                    }
                } else {
                    updateResults('component-results', '<div class="test-result error">❌ Entertainment JavaScript not accessible</div>');
                    testResults.javascript = false;
                }
            } catch (error) {
                updateResults('component-results', `<div class="test-result error">❌ JavaScript test failed: ${error.message}</div>`);
                testResults.javascript = false;
            }
        }

        // Navigation Test
        async function testNavigation() {
            updateResults('navigation-results', '<div class="test-result loading">Testing navigation...</div>');
            
            try {
                const response = await fetch('/index.html');
                if (response.ok) {
                    const html = await response.text();
                    const hasEntertainmentLink = html.includes('Entertainment.html');
                    
                    if (hasEntertainmentLink) {
                        updateResults('navigation-results', '<div class="test-result success">✅ Entertainment link found in main navigation</div>');
                        testResults.navigation = true;
                    } else {
                        updateResults('navigation-results', '<div class="test-result error">❌ Entertainment link missing from main navigation</div>');
                        testResults.navigation = false;
                    }
                } else {
                    updateResults('navigation-results', '<div class="test-result error">❌ Cannot access main page for navigation test</div>');
                    testResults.navigation = false;
                }
            } catch (error) {
                updateResults('navigation-results', `<div class="test-result error">❌ Navigation test failed: ${error.message}</div>`);
                testResults.navigation = false;
            }
        }

        // Admin Links Test
        async function testAdminLinks() {
            updateResults('navigation-results', '<div class="test-result loading">Testing admin page links...</div>');
            
            const adminPages = [
                '/pages/admin/movies.html',
                '/pages/admin/anime.html',
                '/pages/admin/coop.html',
                '/pages/admin/pvp.html'
            ];
            
            let results = '';
            let allAccessible = true;
            
            for (const page of adminPages) {
                try {
                    const response = await fetch(page);
                    if (response.ok) {
                        results += `<div class="test-result success">✅ ${page.split('/').pop()} accessible</div>`;
                    } else {
                        results += `<div class="test-result error">❌ ${page.split('/').pop()} not accessible</div>`;
                        allAccessible = false;
                    }
                } catch (error) {
                    results += `<div class="test-result error">❌ ${page.split('/').pop()}: ${error.message}</div>`;
                    allAccessible = false;
                }
            }
            
            testResults.adminLinks = allAccessible;
            updateResults('navigation-results', results);
        }

        // Sidebar Update Test
        async function testSidebarUpdate() {
            updateResults('navigation-results', '<div class="test-result loading">Testing admin dashboard sidebar removal...</div>');
            
            try {
                const response = await fetch('/pages/admin/admin.html');
                if (response.ok) {
                    const html = await response.text();
                    const hasSidebar = html.includes('class="sidebar"');
                    const hasCategoryNav = html.includes('category-nav');
                    
                    if (!hasSidebar && hasCategoryNav) {
                        updateResults('navigation-results', '<div class="test-result success">✅ Admin sidebar successfully removed and replaced with category navigation</div>');
                        testResults.sidebarUpdate = true;
                    } else if (hasSidebar) {
                        updateResults('navigation-results', '<div class="test-result warning">⚠️ Admin sidebar still present (should be removed)</div>');
                        testResults.sidebarUpdate = false;
                    } else {
                        updateResults('navigation-results', '<div class="test-result warning">⚠️ Sidebar removed but category navigation missing</div>');
                        testResults.sidebarUpdate = false;
                    }
                } else {
                    updateResults('navigation-results', '<div class="test-result error">❌ Cannot access admin dashboard for sidebar test</div>');
                    testResults.sidebarUpdate = false;
                }
            } catch (error) {
                updateResults('navigation-results', `<div class="test-result error">❌ Sidebar test failed: ${error.message}</div>`);
                testResults.sidebarUpdate = false;
            }
        }

        // Helper function to update results
        function updateResults(containerId, content) {
            const container = document.getElementById(containerId);
            if (container) {
                container.innerHTML = content;
            }
            updateLiveResults();
        }

        // Update live results summary
        function updateLiveResults() {
            const liveContainer = document.getElementById('live-results');
            const overallStatus = document.getElementById('overall-status');
            
            const totalTests = Object.keys(testResults).length;
            const passedTests = Object.values(testResults).filter(Boolean).length;
            
            if (totalTests > 0) {
                const passRate = (passedTests / totalTests * 100).toFixed(1);
                let statusClass = 'success';
                let statusIcon = '✅';
                let statusText = 'All systems operational';
                
                if (passRate < 100) {
                    if (passRate >= 75) {
                        statusClass = 'warning';
                        statusIcon = '⚠️';
                        statusText = 'Minor issues detected';
                    } else {
                        statusClass = 'error';
                        statusIcon = '❌';
                        statusText = 'Major issues detected';
                    }
                }
                
                overallStatus.innerHTML = `
                    <span class="status-indicator status-${statusClass === 'success' ? 'online' : 'offline'}"></span>
                    ${statusIcon} ${statusText} (${passedTests}/${totalTests} tests passed - ${passRate}%)
                `;
                overallStatus.className = `test-result ${statusClass}`;
                
                let liveContent = '<h3>📈 Test Summary</h3>';
                Object.entries(testResults).forEach(([test, passed]) => {
                    liveContent += `<div class="test-result ${passed ? 'success' : 'error'}">${passed ? '✅' : '❌'} ${test}: ${passed ? 'PASSED' : 'FAILED'}</div>`;
                });
                
                liveContainer.innerHTML = liveContent;
            }
        }

        // Auto-run initial tests
        window.addEventListener('load', () => {
            setTimeout(() => {
                testServerStatus();
                setTimeout(testNavigation, 1000);
            }, 500);
        });
    </script>
</body>
</html>
